Version 4
SHEET 1 4308 2980
WIRE 1728 -176 1648 -176
WIRE 1808 -176 1792 -176
WIRE 1920 -176 1888 -176
WIRE 1952 -176 1920 -176
WIRE 2032 -176 1952 -176
WIRE 2368 -176 2288 -176
WIRE 2528 -176 2368 -176
WIRE 2688 -176 2528 -176
WIRE 2960 -176 2688 -176
WIRE 3344 -176 2960 -176
WIRE 3760 -176 3344 -176
WIRE 3936 -176 3760 -176
WIRE 2528 -128 2528 -176
WIRE 2768 -128 2608 -128
WIRE 2688 -80 2688 -176
WIRE 2608 -64 2608 -128
WIRE 2656 -64 2608 -64
WIRE 3760 -64 3760 -176
WIRE 2768 -48 2768 -128
WIRE 2768 -48 2720 -48
WIRE 2816 -48 2768 -48
WIRE 3232 -48 2816 -48
WIRE 3728 -48 3232 -48
WIRE 2528 -32 2528 -48
WIRE 2656 -32 2528 -32
WIRE 3936 -32 3792 -32
WIRE 1952 -16 1952 -176
WIRE 2368 -16 2368 -176
WIRE 2528 -16 2528 -32
WIRE 3728 -16 3680 -16
WIRE 3760 48 3760 0
WIRE 1952 112 1952 48
WIRE 2064 112 1952 112
WIRE 2160 112 2160 -80
WIRE 2160 112 2064 112
WIRE 2368 112 2368 48
WIRE 2368 112 2160 112
WIRE 2528 112 2528 64
WIRE 2528 112 2368 112
WIRE 2688 112 2688 -16
WIRE 2688 112 2528 112
WIRE 2064 144 2064 112
WIRE 2816 256 2816 -48
WIRE 2816 256 2592 256
WIRE 1648 320 1648 -176
WIRE 1792 320 1648 320
WIRE 1984 320 1792 320
WIRE 2240 320 1984 320
WIRE 1984 352 1984 320
WIRE 2592 352 2592 256
WIRE 2240 368 2240 320
WIRE 2752 368 2704 368
WIRE 2880 368 2832 368
WIRE 2992 368 2880 368
WIRE 3104 368 3072 368
WIRE 2704 416 2704 368
WIRE 1648 464 1648 320
WIRE 1984 464 1984 432
WIRE 2960 480 2960 -176
WIRE 2880 496 2880 368
WIRE 2928 496 2880 496
WIRE 3104 512 3104 368
WIRE 3104 512 2992 512
WIRE 3536 512 3104 512
WIRE 3680 512 3680 -16
WIRE 3680 512 3616 512
WIRE 3792 512 3680 512
WIRE 2240 528 2240 448
WIRE 2464 528 2240 528
WIRE 2592 528 2592 432
WIRE 2592 528 2544 528
WIRE 2928 528 2592 528
WIRE 2240 576 2240 528
WIRE 3680 576 3680 512
WIRE 1984 592 1984 544
WIRE 2112 592 1984 592
WIRE 2960 592 2960 544
WIRE 1984 608 1984 592
WIRE 3680 672 3680 640
WIRE 1648 704 1648 544
WIRE 1792 704 1648 704
WIRE 1984 704 1984 688
WIRE 1984 704 1792 704
WIRE 2240 704 2240 656
WIRE 2240 704 1984 704
WIRE 3232 704 3232 -48
WIRE 3232 704 2592 704
WIRE 1792 736 1792 704
WIRE 3344 800 3344 -176
WIRE 3344 800 2960 800
WIRE 3616 800 3344 800
WIRE 2592 912 2592 704
WIRE 2752 928 2704 928
WIRE 2880 928 2832 928
WIRE 2992 928 2880 928
WIRE 3104 928 3072 928
WIRE 2704 976 2704 928
WIRE 3616 976 3616 800
WIRE 3232 992 3232 704
WIRE 3584 992 3232 992
WIRE 3792 1008 3648 1008
WIRE 3584 1024 3456 1024
WIRE 2960 1040 2960 800
WIRE 2880 1056 2880 928
WIRE 2928 1056 2880 1056
WIRE 3104 1072 3104 928
WIRE 3104 1072 2992 1072
WIRE 3232 1072 3104 1072
WIRE 2112 1088 2112 592
WIRE 2464 1088 2112 1088
WIRE 2592 1088 2592 992
WIRE 2592 1088 2544 1088
WIRE 2928 1088 2592 1088
WIRE 3616 1088 3616 1040
WIRE 2960 1152 2960 1104
WIRE 3456 1248 3456 1024
WIRE 3680 1248 3456 1248
WIRE 3232 1456 3232 1072
WIRE 3536 1456 3232 1456
WIRE 3680 1456 3680 1248
WIRE 3680 1456 3616 1456
WIRE 3792 1456 3680 1456
WIRE 3680 1520 3680 1456
WIRE 3680 1616 3680 1584
FLAG 1792 320 Vac
FLAG 2528 -176 5VDis
FLAG 1920 -176 Vin
FLAG 1792 736 0
FLAG 2960 592 0
FLAG 2704 416 0
FLAG 2064 144 0
FLAG 2960 1152 0
FLAG 2704 976 0
FLAG 3680 672 0
FLAG 3680 1616 0
FLAG 3760 48 0
FLAG 3616 1088 0
SYMBOL voltage 1648 448 R0
WINDOW 0 24 96 Left 2
WINDOW 3 22 124 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply
SYMATTR Value SINE(0 21.78 500)
SYMBOL PowerProducts/LT1085-5 2160 -176 R0
SYMATTR InstName Reg
SYMBOL diode 1728 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 1936 -16 R0
SYMATTR InstName Cin
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=0.001
SYMBOL cap 2352 -16 R0
SYMATTR InstName Cout
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.001
SYMBOL res 1968 448 R0
SYMATTR InstName Rload
SYMATTR Value 28.46
SYMBOL ind 1968 336 R0
SYMATTR InstName Lload
SYMATTR Value 4mH
SYMBOL res 1968 592 R0
SYMATTR InstName Rs
SYMATTR Value 1
SYMBOL res 2224 352 R0
SYMATTR InstName Ra
SYMATTR Value 820k
SYMBOL res 2224 560 R0
SYMATTR InstName Rb
SYMATTR Value 39k
SYMBOL Opamps/opamp2 2960 448 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res 3088 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 2848 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 2560 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 2576 336 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 2512 -32 R0
SYMATTR InstName R6
SYMATTR Value 33k
SYMBOL res 2512 -144 R0
SYMATTR InstName R5
SYMATTR Value 47k
SYMBOL Opamps/opamp2 2688 -112 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL Opamps/opamp2 2960 1008 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res 3088 912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 56k
SYMBOL res 2848 912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 27k
SYMBOL res 2560 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 27k
SYMBOL res 2576 896 R0
SYMATTR InstName R10
SYMATTR Value 56k
SYMBOL res 3632 496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL cap 3664 576 R0
SYMATTR InstName C1
SYMATTR Value 1.5n
SYMBOL res 3632 1440 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL cap 3664 1520 R0
SYMATTR InstName C2
SYMATTR Value 1.5n
SYMBOL Opamps/opamp2 3760 -96 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL res 1904 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 33
SYMBOL Opamps/opamp2 3616 944 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U5
SYMATTR Value LM324
TEXT 3200 -352 Left 2 ;.ac dec 30 1 1Meg
TEXT 3200 -416 Left 2 !.lib LM324.lib
TEXT 1936 360 Right 2 ;Load \n(2.5VA-7.5VA)
TEXT 1936 648 Right 2 ;Current Sens \n(Pmax=?)
TEXT 2184 248 Left 2 ;Voltage Sens\n(Vvs(max)=?)
TEXT 3192 -480 Left 2 ;Simulation Commands\n- Change these as needed
TEXT 3200 -384 Left 2 !.tran 0 50m 0 0.1m
TEXT 3200 -320 Left 2 !.ic V(Vin)=8
TEXT 2000 -304 Left 2 ;DC regulator
TEXT 2624 -304 Left 2 ;DC offset
TEXT 2656 640 Left 2 ;Voltage signal conditioning
TEXT 2656 1200 Left 2 ;Current signal conditioning
TEXT 3520 720 Left 2 ;Low-pass RC filter
TEXT 3520 1664 Left 2 ;Low-pass RC filter
TEXT 3712 96 Left 2 ;Zero crossing detector
TEXT 3952 -176 Left 2 ;uC power supply -->
TEXT 3568 1136 Left 2 ;Zero crossing detector
TEXT 3952 -32 Left 2 ;Voltage zero crossing detector
TEXT 3816 512 Left 2 ;Voltage measurement
TEXT 3816 1008 Left 2 ;Current zero crossing detector
TEXT 3816 1456 Left 2 ;Current measurement
RECTANGLE Normal 1944 340 2072 556 2
RECTANGLE Normal 1944 584 2072 696 2
RECTANGLE Normal 2188 292 2324 728 2
RECTANGLE Normal 3160 -496 3596 -292 2
RECTANGLE Normal 2448 176 1712 -288 2
RECTANGLE Normal 2848 176 2480 -288 2
RECTANGLE Normal 3152 624 2448 304 2
RECTANGLE Normal 3152 1184 2448 864 2
RECTANGLE Normal 3760 704 3488 448 2
RECTANGLE Normal 3760 1648 3488 1392 2
RECTANGLE Normal 3872 80 3664 -80 2
RECTANGLE Normal 3728 1120 3520 960 2
